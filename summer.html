<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Website List</title>
<meta name="description" content="homepageのリンクListsです">
<link rel="icon" href="icon.svg" type="image/svg+xml">

<style>
  /* --- 全体リセット --- */
  *, *::before, *::after { box-sizing: border-box; }
  html, body {
    margin: 0; padding: 0;
    font-family: 'Inter', 'Segoe UI', 'Hiragino Kaku Gothic ProN', sans-serif;
    min-height: 100vh;
    background: linear-gradient(to bottom, #ffcf91 0%, #a96bf8 100%);
    color: #333;
    overflow-x: hidden;
    --firework-brightness: 1; /* 花火の明るさ制御用 */
  }

  /* --- コンテナ --- */
  .container {
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 1rem;
    position: relative;
    z-index: 1;
  }

  /* --- 見出し --- */
  h1 {
    text-align: center;
    font-size: 2rem;
    color: #f0f0f0;
    text-shadow: 0 0 8px rgba(0,0,0,0.7);
    margin-bottom: 2rem;
    position: relative;
    z-index: 2;
    filter: brightness(var(--firework-brightness));
    transition: filter 0.1s linear;
  }
  h1 a.tpww {
    color: #fff8dd;
    text-decoration: none;
    cursor: pointer;
  }
  h1 a.tpww:hover { text-decoration: underline; }

  /* --- リスト --- */
  ul {
    padding: 0; margin: 0;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1rem;
    list-style: none;
    position: relative;
    z-index: 2;
  }
  li a {
    display: block;
    background: rgba(20,20,20,0.15);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    color: #ddd;
    text-decoration: none;
    padding: 1rem;
    border-radius: 16px;
    font-size: 1rem;
    font-weight: 600;
    border: 1px solid rgba(255,255,255,0.12);
    box-shadow: 0 4px 12px rgba(0,0,0,0.35);
    transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease, filter 0.1s linear;
    word-break: break-word;
    filter: brightness(var(--firework-brightness));
  }
  li a:hover {
    background: rgba(30,30,30,0.3);
    transform: translateY(-4px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.5);
  }

  /* --- フッター --- */
  footer {
    text-align: center;
    padding: 1rem;
    color: #f0f0f0;
    font-size: 0.85rem;
    position: relative;
    z-index: 2;
  }
  footer a { color: #fff8dd; text-decoration: underline; }

  /* --- 花火 canvas --- */
  #fireworksCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }

  /* --- 花火 ON/OFF ボタン --- */
  #fireworks-toggle {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 10;
    background: rgba(0,0,0,0.5);
    color: #fff;
    border: none;
    border-radius: 20px;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #fireworks-toggle:hover { background: rgba(0,0,0,0.7); }

  /* --- スマホ対応 --- */
  @media (max-width:480px){
    h1{font-size:1.5rem;}
    footer{font-size:0.75rem;}
    ul{grid-template-columns:1fr !important;}
    #fireworks-toggle{font-size:0.85rem;padding:0.4rem 0.8rem;}
  }
</style>
</head>
<body>
<canvas id="fireworksCanvas"></canvas>
<button id="fireworks-toggle">花火ON</button>

<div class="container">
  <h1><a href="./autumn" class="tpww">Website List</a></h1>
  <h1><a href="./spring" class="tpww">Spring Collection</a></h1>
  <ul id="site-list"></ul>
  <ul id="public-site-list"></ul>
</div>

<footer id="main-footer">
  <span id="footer-hamusata">&copy; <span id="year-hamusata">2025</span> <a href="https://home.hamusata.f5.si" target="_blank" rel="noopener noreferrer">@hamusata</a></span>
  <span id="footer-hamuzon" style="display:none;">&copy; <span id="year-hamuzon">2025</span> <a href="https://github.com/Hamuzon" target="_blank" rel="noopener noreferrer">@hamuzon</a></span>
  <br>
  <span id="default-message">※一部のサイトは現在アクセスできない場合があります。<br>Some sites may be temporarily unavailable.</span>
</footer>

<script src="sites.js"></script>
<script src="fireworks.js"></script>
<script>
document.addEventListener("DOMContentLoaded", ()=>{
  const currentHost = window.location.hostname;
  const siteList = document.getElementById("site-list");
  const publicSiteList = document.getElementById("public-site-list");
  const footerHamusata = document.getElementById("footer-hamusata");
  const footerHamuzon = document.getElementById("footer-hamuzon");
  const footer = document.getElementById("main-footer");

  const safeCreateLinkItem = typeof createLinkItem==="function"?createLinkItem:({href,text,className,openInSameTab})=>{
    const li=document.createElement("li");
    const a=document.createElement("a");
    a.href=href; a.textContent=text||href; a.rel="noopener noreferrer";
    if(className) a.className=className;
    a.target=openInSameTab?"_self":"_blank";
    li.appendChild(a);
    return li;
  };

  if(currentHost==="home.hamusata.f5.si"){
    siteList.innerHTML="";
    sitesData.homeHamusata.forEach(site=>siteList.appendChild(safeCreateLinkItem(site)));
    siteList.style.display="grid"; publicSiteList.style.display="none";
    footerHamusata.style.display="inline"; footerHamuzon.style.display="none";
  } else if(currentHost==="hamuzon.github.io"){
    siteList.innerHTML="";
    sitesData.hamuzonGitHubIO.forEach(site=>siteList.appendChild(safeCreateLinkItem(site)));
    siteList.style.display="grid"; publicSiteList.style.display="none";
    footerHamusata.style.display="none"; footerHamuzon.style.display="inline";
  } else {
    publicSiteList.innerHTML="";
    sitesData.publicSites.forEach(site=>publicSiteList.appendChild(safeCreateLinkItem(site)));
    siteList.style.display="none"; publicSiteList.style.display="grid";
    footerHamusata.style.display="none"; footerHamuzon.style.display="none";
    footer.innerHTML=`<span style="display:block;padding:0.5rem;color:#f0f0f0;">このサイトは公式ではなく、一部の情報は異なる場合があります。<br>This version may differ from the original official site.</span>`;
  }

  const baseYear=2025; const currentYear=new Date().getFullYear();
  const yearText=currentYear>baseYear?`${baseYear}~${currentYear}`:`${baseYear}`;
  document.getElementById("year-hamusata").textContent=yearText;
  document.getElementById("year-hamuzon").textContent=yearText;

  // 花火の明るさに応じてリンクや見出しを微光らせる
  if(window.fireworksControl){
    const updateBrightness=()=>{
      if(window.fireworksControl.manager){
        const fwMgr=window.fireworksControl.manager;
        const brightness=Math.min(1+fwMgr.fireworks.reduce((acc,fw)=>acc+fw.particles.reduce((a,p)=>a+p.alpha,0),0)/150,1.5);
        document.documentElement.style.setProperty("--firework-brightness", brightness);
      }
      requestAnimationFrame(updateBrightness);
    };
    requestAnimationFrame(updateBrightness);
  }
});

// 花火 ON/OFF ボタン
(() => {
  const toggleBtn = document.getElementById('fireworks-toggle');
  let fireworksOn = true;
  toggleBtn.addEventListener('click', () => {
    fireworksOn = !fireworksOn;
    if(fireworksOn){ toggleBtn.textContent='花火ON'; window.fireworksControl.start(); }
    else { toggleBtn.textContent='花火OFF'; window.fireworksControl.stop(); }
  });
})();
</script>
</body>
</html>